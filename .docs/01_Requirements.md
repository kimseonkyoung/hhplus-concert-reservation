# 콘서트 예약 시스템 (Concert reservation system)

## 개요
- 콘서트 예약 서비스를 구현합니다.
- 대기열 시스템을 구축하고, 예약 서비스는 작업가능한 유저만 수행할 수 있도록 합니다.
- 유저는 좌석예약 시에 미리 충전한 잔액을 이용합니다.
- 좌석 예약 요청 시에, 결제가 이루어지지 않더라도 일정 시간동안 다른 유저가 해당 좌석에 접근할 수 없도록 합니다.

## 요구사항 목록

### 기능적 요구사항

1. 유저 토큰 발급 API
- 서비스를 이용할 토큰을 발급받는 API를 작성
- 토큰은 UUID와 해당 유저의 대기열을 관리할 수 있는 정보 (대기 순서 or 잔여시간)을 포함
- 모든 API는 위 토큰을 이용해 대기열 검증을 통과
- 기본적으로 폴링으로 본인의 대기열을 확인한다고 가정, 다른 방안 또한 고려해보고 구현 가능

2. 예약 가능 날짜 / 좌석 API
- 예약가능한 날짜와 해당 날짜의 좌석을 조회하는 API를 작성
- 예약 가능한 날짜 목록을 조회
- 날짜 정보를 입력받아 예약가능한 좌석정보를 조회
- 좌석 정보는 1 ~ 50까지의 좌석번호로 관리

3. 좌석 예약 요청 API
- 좌석 예약과 동시에 해당 좌석은 그 유저에게 약 5분간 임시 배정(정책상 변경 가능)
- 배정 시간 내에 결제과 완료되지 않는다면 좌석에 대한 임시 배정은 해제되어야 하며, 다른 사용자는 예약 X

4. 잔액 충전 / 조회 API
- 유저 식별자 및 충전할 금액을 받아 잔액을 충전
- 유저 식별자를 통해 해당 사용자의 잔액을 조회

5. 결제 API
- 결제가 완료되면 해당 좌석의 소유권을 유저에게 배정하고 해당 유저의 대기열 토큰을 만료


### 비기능적 요구사항

1. 각 기능 및 제약사항에 대해 단위 테스트를 반드시 하나 이상 작성: *TDD 방식 적용*
2. 다수의 인스턴스로 애플리케이션이 동작하더라도 기능에 문제가 없도록 작성: *효율적인 DB락 동시성 제어*
3. 대기열 개념을 고려해 구현: *효율적인 스케줄러 활용법과 QUEUE 구현*

### 우선사항 및 중요도
| 요구사항                                     | 우선순위 | 중요도 | 비고                                       |
|------------------------------------------|------|-----|--------------------------------------------------|
| 유저 토큰 발급 API                            | 높음   | 높음  | 프로젝트 초기 핵심 기능                         |
| 예약 가능 날짜 / 좌석 API                     | 높음   | 높음  | 토큰 발급과 대기열 다음에 바로 실행되는 기능        |
| 좌석 예약 요청 API                           | 높음   | 높음  | 동시성 제어와 관련된 기능, 자리 선점에 대해 고려    |
| 잔액 충전 / 조회 API                         | 낮음   | 중간  | 핵심 기능과 분리된 기능                         |
| 결제 API                                   | 낮음   | 중간  | 핵심 기능 후순위 실행 가능 기능                   |
| TDD 방식 적용                                | 낮음   | 높음  | tdd 개발 철학 유지                            |
| 동시성 제어                                   | 높음   | 높음  | 자리 예매 시스템 핵심 고려사항                   |
| 효율적인 스케줄러 활용법과 QUEUE 구현             | 낮음   | 높음  | 동시 접속자 증가로 인해 토큰 queue 증가 대비      |




